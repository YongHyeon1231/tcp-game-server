# tcp-game-server

[내일 배움 캠프] 스파르타) Node.js 게임서버개발 주특기 플러스 + 2주차 강의에서 다뤄진 TCP 게임 서버 만들기

# 들어가 있는 내용

프로젝트 전체 구조부터 시작해서 패킷 구조 설계,
교환,
세션,
DB,
게임 및 유저 인스턴스 객체화,
인스턴스 관리,
상태 동기화,
레이턴시 관리,
레이턴시 마스킹

위의 내용이 여기에 들어가 있으니 가져다가 이것저것 만들어봅니다.

# 사용한 라이브러리들

npm init -y
npm install dotenv lodash long mysql2 protobufjs uuid
npm install -D nodemon prettier

# 중앙 집중식 관리

- 모든 환경 변수와 상수는 한 곳에서 관리, 다른 파일에서 동일한 값을 사용하여도 일관성을 유지
- 변경이 필요할 때 한 곳에서만 수정하면 됨
- 환경 변수, 상수의 직접 사용이 아니기때문에 코드가 명확해지는 효과
- 필요한 경우 개발, 테스트, 프로덕션 환경별로 다른 설정 사용 가능

# 소켓 이벤트 분리

- 이벤트를 구분해서 관리할 수 있습니다.
- 바이트 배열에서 패킷 헤더를 구분할 수 있습니다.
- 위의 것을 하기 위해서 소켓 이벤트들을 분리해줘야합니다.
- 이때 분리해서 각각의 소켓 이벤트들을 호출해 줄 때 '커링'이라는 기법을 사용하여 여러 인수를 받는 함수를 인수가 하나인 함수들의 연속으로 변환시켜줍니다.
- 바이트 배열을 분해하여 각 클라이언트마다 고유한 버퍼를 할당해주는 것 입니다.
- 그렇다면 socket 이벤트 중에서 데이터를 받는 이벤트가 'data' 이벤트 이기 때문에 우리의 데이터는 스트림을 통해 청크단위로 조금씩 전송받기 때문에 우리가 원하는 데이터가 들어올때까지 계속 대기하다가 원하는 데이터가 도착하면 처리해주면 됩니다.
